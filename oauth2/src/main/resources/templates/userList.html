<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <title>userList</title>
    <script src="../layui/layui.js"></script>
    <link rel="stylesheet" href="../layui/css/layui.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
</head>
<body>
<script type="text/html" id="toolbarDemo">
    <div class="layui-btn-group demoTable" align="left">
        <button class="btn btn-default" data-toggle="modal" data-target="#myModal">添加用户</button>
    </div>
</script>
<div>
    <br/>
    <table style="width:80%" class="layui-hide" id="demo" lay-filter="demo"></table>
</div>
<!-- 模态框（Modal） -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <form class="form" action="#" th:action="@{/userAdd}" method="post" style="width:400px">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h5 class="modal-title" id="myModalLabel" align="center">
                        添加用户
                    </h5>
                </div>
                <div class="modal-body">
                    <div class="form-group" align="left">
                        <label class="control-label">用户姓名</label>
                        <input class="form-control" type="text" name="username" placeholder="输入用户姓名"/>
                    </div>
                    <div class="form-group" align="left">
                        <label class="control-label">用户昵称</label>
                        <input class="form-control" type="text" name="nickname" placeholder="输入用户昵称"/>
                    </div>
                    <div class="form-group" align="left">
                        <label class="control-label">用户密码</label>
                        <input class="form-control" type="password" name="password" placeholder="输入用户密码"/>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">
                        关闭
                    </button>
                    <button type="submit" class="btn btn-success">
                        保存
                    </button>
                </div>
            </div><!-- /.modal-content -->
        </form>
    </div><!-- /.modal -->
</div>
</body>
<script type="text/html" id="barDemo">
    <a class="layui-btn layui-btn-xs" lay-event="detail">查看</a>
    <a class="layui-btn layui-btn-xs" lay-event="edit">编辑</a>
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="del">删除</a>
</script>
<script type="text" id="editWind">
    <h3>edit me</h3>
</script>
<script>
layui.use('table', function(){
  var table = layui.table;
  //监听表格复选框选择
  table.on('checkbox(demo)', function(obj){
    console.log(obj)
  });
  //监听工具条
  table.on('tool(demo)', function(obj){
    var data = obj.data;
    if(obj.event === 'detail'){
      layer.msg('ID：'+ data.id + ' 的查看操作');
    } else if(obj.event === 'del'){
      layer.confirm('真的删除行么', function(index){
        obj.del();
        layer.close(index);
      });
    } else if(obj.event === 'edit'){
      //layer.alert('编辑行：<br>'+ JSON.stringify(data))
      console.log("userName:"+data.username);
      console.log("nickname:"+data.nickname);
      console.log("password:"+data.password);
      openEdit();

    }
  });
 function openEdit(){

 }

  $('.demoTable .layui-btn').on('click', function(){
    var type = $(this).data('type');
    active[type] ? active[type].call(this) : '';
  });
});



</script>
<script>
    layui.use(['table', 'form'], function () {
        var table = layui.table;
        var form = layui.form;
        var $ = layui.$;
        form.render('select');
        table.render({
            elem: '#demo'  //绑定table id
            , url: '/userData'  //数据请求路径，
            ,toolbar: '#toolbarDemo' //开启头部工具栏，并为其绑定左侧模板
            , cellMinWidth: 80
            , cols: [
                [
                    {type: 'checkbox', fixed: 'left'}
                    , {field: 'id', title: 'id'}
                    , {field: 'username', title: 'userName'}
                    , {field: 'nickname', title: 'nickname'}
                    , {field: 'password', title: 'password'}
                    , {field: 'createTime', title: '添加时间', templet: '#createTime'}
                    ,{fixed: 'right', title:'操作', toolbar: '#barDemo', width:250}
                ]
            ]
            , id: 'testReload'
            , page: true
            , limit: 10   //默认十条数据一页
            , limits: [10, 20, 30, 50]  //数据分页条
            , done: function (res, curr, count) {
                layer.msg(res.msg)
            }

        });

        form.on('select(search_type)', function (data) {
            if ($("#search_type")[0].value == '') {
                layer.msg('请选择数据源类型')
                return;
            }
            //执行重载
            table.reload('testReload', {
                page: {
                    curr: 1 //重新从第 1 页开始
                }
                , where: {
                    driverType: data.value //查询条件
                }
            });
        });
    });



</script>
</html>
</html>